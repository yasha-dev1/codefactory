{
  "version": "1.0.0",
  "repoRoot": "/home/yasha/Desktop/projects/codefactory",
  "detection": {
    "primaryLanguage": "TypeScript",
    "framework": null,
    "packageManager": "npm",
    "ciProvider": null,
    "monorepo": false
  },
  "riskTiers": {
    "tier1": {
      "name": "low",
      "patterns": ["docs/**", "*.md", "**/*.md"],
      "requiredChecks": ["lint"],
      "mergePolicy": "auto",
      "evidenceRequirements": ["lint-clean"]
    },
    "tier2": {
      "name": "medium",
      "patterns": ["src/**", "tests/**"],
      "requiredChecks": ["lint", "type-check", "test", "build"],
      "mergePolicy": "review-agent",
      "evidenceRequirements": ["tests-pass", "lint-clean", "type-check-clean"]
    },
    "tier3": {
      "name": "high",
      "patterns": [
        "src/index.ts",
        "src/cli.ts",
        "src/commands/init.ts",
        "src/core/claude-runner.ts",
        "src/core/config.ts",
        "src/core/detector.ts",
        "src/core/file-writer.ts",
        "src/harnesses/index.ts",
        "src/harnesses/types.ts",
        "package.json",
        "tsconfig.json",
        "tsup.config.ts",
        "vitest.config.ts",
        "eslint.config.js"
      ],
      "requiredChecks": [
        "lint",
        "type-check",
        "test",
        "build",
        "structural-tests",
        "harness-smoke",
        "manual-approval"
      ],
      "mergePolicy": "review-agent + manual",
      "evidenceRequirements": ["tests-pass", "lint-clean", "type-check-clean", "manual-review"]
    }
  },
  "commands": {
    "test": "npm test",
    "build": "npm run build",
    "lint": "npm run lint",
    "typeCheck": "npm run typecheck"
  },
  "shaDiscipline": {
    "enabled": true,
    "description": "All CI gates pin to exact commit SHA from the risk policy gate"
  },
  "architecturalBoundaries": {
    "utils": {
      "allowedImports": []
    },
    "ui": {
      "allowedImports": ["utils"]
    },
    "core": {
      "allowedImports": ["utils"]
    },
    "commands": {
      "allowedImports": ["core", "harnesses", "ui", "utils", "prompts"]
    },
    "prompts": {
      "allowedImports": ["core", "utils"]
    },
    "providers": {
      "allowedImports": ["core", "utils"]
    },
    "harnesses": {
      "allowedImports": ["core", "prompts", "providers", "utils"]
    }
  },
  "harnesses": [
    {
      "name": "risk-contract",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": ["/home/yasha/Desktop/projects/codefactory/harness.config.json"]
    },
    {
      "name": "claude-md",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": ["/home/yasha/Desktop/projects/codefactory/CLAUDE.md"]
    },
    {
      "name": "docs-structure",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/docs/architecture.md",
        "/home/yasha/Desktop/projects/codefactory/docs/conventions.md",
        "/home/yasha/Desktop/projects/codefactory/docs/layers.md"
      ]
    },
    {
      "name": "pre-commit-hooks",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/.husky/pre-commit",
        "/home/yasha/Desktop/projects/codefactory/.lintstagedrc.json",
        "/home/yasha/Desktop/projects/codefactory/package.json"
      ]
    },
    {
      "name": "risk-policy-gate",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/scripts/risk-policy-gate.sh",
        "/home/yasha/Desktop/projects/codefactory/scripts/risk-policy-gate.ts",
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/risk-policy-gate.yml",
        "/home/yasha/Desktop/projects/codefactory/src/utils/harness-config.ts"
      ]
    },
    {
      "name": "ci-pipeline",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/ci.yml",
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/structural-tests.yml",
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/harness-smoke.yml",
        "/home/yasha/Desktop/projects/codefactory/scripts/structural-tests.sh"
      ]
    },
    {
      "name": "review-agent",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/code-review-agent.yml",
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/review-agent-rerun.yml",
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/auto-resolve-threads.yml",
        "/home/yasha/Desktop/projects/codefactory/scripts/review-agent-utils.ts",
        "/home/yasha/Desktop/projects/codefactory/scripts/review-prompt.md"
      ]
    },
    {
      "name": "remediation-loop",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/remediation-agent.yml",
        "/home/yasha/Desktop/projects/codefactory/scripts/remediation-agent-prompt.md",
        "/home/yasha/Desktop/projects/codefactory/scripts/remediation-guard.ts"
      ]
    },
    {
      "name": "pr-templates",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/.github/PULL_REQUEST_TEMPLATE.md",
        "/home/yasha/Desktop/projects/codefactory/.github/PULL_REQUEST_TEMPLATE/agent-pr.md"
      ]
    },
    {
      "name": "architectural-linters",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/scripts/lint-architecture-config.json",
        "/home/yasha/Desktop/projects/codefactory/scripts/lint-architecture.ts"
      ]
    },
    {
      "name": "garbage-collection",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/doc-gardening.yml",
        "/home/yasha/Desktop/projects/codefactory/scripts/doc-gardening-prompt.md"
      ]
    },
    {
      "name": "incident-harness-loop",
      "enabled": true,
      "generatedAt": "2026-02-19T21:32:46.278Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/.github/ISSUE_TEMPLATE/harness-gap.md",
        "/home/yasha/Desktop/projects/codefactory/docs/harness-gaps.md",
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/weekly-metrics.yml",
        "/home/yasha/Desktop/projects/codefactory/harness.config.json"
      ]
    },
    {
      "name": "issue-triage",
      "enabled": true,
      "generatedAt": "2026-02-20T00:00:00.000Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/issue-triage.yml",
        "/home/yasha/Desktop/projects/codefactory/scripts/issue-triage-guard.ts",
        "/home/yasha/Desktop/projects/codefactory/.codefactory/prompts/issue-triage.md"
      ]
    },
    {
      "name": "issue-planner",
      "enabled": true,
      "generatedAt": "2026-02-20T00:00:00.000Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/issue-planner.yml",
        "/home/yasha/Desktop/projects/codefactory/scripts/issue-planner-guard.ts",
        "/home/yasha/Desktop/projects/codefactory/.codefactory/prompts/issue-planner.md"
      ]
    },
    {
      "name": "issue-implementer",
      "enabled": true,
      "generatedAt": "2026-02-20T00:00:00.000Z",
      "files": [
        "/home/yasha/Desktop/projects/codefactory/.github/workflows/issue-implementer.yml",
        "/home/yasha/Desktop/projects/codefactory/scripts/issue-implementer-guard.ts",
        "/home/yasha/Desktop/projects/codefactory/.codefactory/prompts/issue-implementer.md"
      ]
    }
  ],
  "generatedAt": "2026-02-19T21:32:46.278Z",
  "lastUpdated": "2026-02-20T00:00:00.000Z"
}
